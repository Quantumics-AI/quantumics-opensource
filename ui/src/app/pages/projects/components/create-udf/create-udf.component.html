<app-loader [loading]="loading">
    <div class="page-content">
        <div class="data-grid">
            <div class="card-body">
                <form [formGroup]="fg">
                    <div class="scroll-div">
                        <div class="row">
                            <div class="form-group col-md-6">
                                <input type="text" id="udfname" class="form-control addheight" placeholder="UDF Name" formControlName="udfname">
                            </div>
                            <div class="form-group col-md-6">
                                <select class="form-control addheight" id="scriptLanguage" formControlName="scriptLanguage"  [(ngModel)]="selectedLanguage">
                                    <option value="" [value]="undefined" disabled selected >--Select Language--</option>
                                    <option value="Pyspark">Pyspark</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 table-responsive" formArrayName="arguments">
                                <table class="table">
                                    <thead>
                                        <tr>
                                        <th style="white-space: nowrap;padding-right: 4em;float:center"><span class="required-field"></span>Select Value </th>
                                        <th style="white-space: nowrap;padding-right: 4em;float:center">Select Options </th>
                                        <th style="white-space: nowrap;padding-right: 4em;float:center">Select Data Type </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let itemrow of fg.controls.arguments['controls']; let i=index"  [formGroupName]="i">
            
                                        <td style="white-space: nowrap;">
                                            <select class="form-control addheight" id="dataValue{{i}}" formControlName="dataValue" >
                                                <option value="" [value]="undefined" disabled selected >--Select Value--</option>
                                                <option value="Data frame">Data Frame</option>
                                                <!-- <option value="Argument">Argument</option> -->
                                                <option value="Variable">Variable</option>
                                            </select>
                                        </td>
                                        <td> 
                                            <select class="form-control addheight" id="options" formControlName="options">
                                                <option value="" [value]="undefined" disabled selected >--Select Options--</option>
                                                <option value="Mandatory">Mandatory</option>
                                                <option value="Optional">Optional</option>
                                            </select>
                                        </td>
                                        <td> 
                                            <select class="form-control addheight" id="dataType" formControlName="dataType">
                                                <option value="" [value]="undefined" disabled selected >--Select Data Type--</option>
                                                <option value="Data frame">Data frame</option>
                                                <option value="String">String</option>
                                                <option value="Integer">Integer</option>
                                            </select>
                                        </td>
                                        <td> <button *ngIf="fg.controls.arguments['controls'].length > 1" (click)="deleteRow(i)" class="btn btn-danger deleteBtn"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></td>
                                    </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr><td> <button type="button" (click)="addNewRow()" class="btn btn-primary add-btn"><i class="fa fa-plus-circle" aria-hidden="true"></i></button></td></tr>
                                    </tfoot>
                                </table>
                        </div>
            
                        </div>
                        
                    
                        <div class="form-group">
                            <textarea class="form-control" id="udfdefination" formControlName="udfdefination" placeholder="Input Logic"  rows="3"></textarea>
                        </div>
                        <div class="form-group or">
                            OR
                        </div>
                        <div class="custom-file">
                            <input id="file" name="file" type="file" class="custom-file-input" id="projectLogo" accept=".py"
                                (change)="validate($event)" title="{{logicFileName}}" enctype="multipart/form-data" multiple #file />
                            <label class="custom-file-label upload-logo" for="customFile">{{logicFileName}}
                                <span class="imgspan">
                                    <img class="fileimg" height="27" src="../../../../../assets/img/project/attach_icon.svg" alt="">
                                </span>
                                
                            </label>
                        </div>
                        <div class="form-group">
                            <input type="text" id="return" class="form-control addheight" formControlName="udfReturn" placeholder="Return Data Type" >
                        </div>
            
                        <div class="form-group">
                            <input type="text" id="udfsyntax" formControlName="udfsyntax" class="form-control addheight" placeholder="UDF Syntax">
                        </div>
                        <div class="form-group " style="display: flex; flex-direction: row; ">
                            <input type="checkbox" formControlName="publish" [(ngModel)]="publish" style="margin-right: 4px; margin-top: 4px;">
                            <p style="font-size: 14px;">
                                Publish
                            </p>
                        </div>
                    </div>
                    
                
                    <div class="row btns">
                        <!-- <div class="col-2">
                            <button type="submit" class="btn btn-primary " disabled>Validate</button>
                        </div> -->

                        <!-- removed publish validation -- [disabled]="!publish" -->
                        <div class="col-1">
                            <button type="submit" class="btn btn-primary" (click)="createUdfFunction()">Create</button>
                        </div>
                        <div class="col-1">
                            <button type="submit" class="btn btn-secondary" (click)="clearValues()">Cancel</button>
                        </div>
                        
                    </div>
                
                </form>
            </div>
        </div>
    </div>
</app-loader>